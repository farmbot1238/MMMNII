<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الامتحانات الدائري - تواريخ الأردن</title>
    <style>
        :root {
            --primary-color: #1a5f7a;
            --secondary-color: #2a9d8f;
            --accent-color: #ff9e00;
            --danger-color: #e63946;
            --success-color: #57cc99;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow-light: 0 8px 25px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 15px 35px rgba(0, 0, 0, 0.15);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --border-radius-lg: 30px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Cairo', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c2461 0%, #1a5f7a 100%);
            color: var(--dark-color);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* خلفية ديناميكية */
        .dynamic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-circle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: float 15s infinite linear;
        }

        .bg-circle:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .bg-circle:nth-child(2) {
            width: 200px;
            height: 200px;
            top: 60%;
            right: 15%;
            animation-delay: 3s;
        }

        .bg-circle:nth-child(3) {
            width: 150px;
            height: 150px;
            bottom: 20%;
            left: 20%;
            animation-delay: 6s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(20px) rotate(240deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* الهيدر */
        .main-header {
            text-align: center;
            padding: 40px 0 30px;
            color: white;
        }

        .header-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-light);
        }

        .site-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent-color), #ff9100);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: var(--shadow-light);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .site-title {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff9e00, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .site-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.9);
        }

        /* بطاقة الطالب */
        .student-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 30px auto;
            max-width: 800px;
            text-align: center;
            box-shadow: var(--shadow-medium);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .student-card:hover {
            transform: translateY(-5px);
        }

        .student-card:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }

        .student-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .student-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .student-role {
            color: #666;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .role-highlight {
            color: var(--accent-color);
            font-weight: 600;
        }

        /* الدوائر */
        .circles-section {
            margin: 50px 0;
        }

        .section-title {
            text-align: center;
            color: white;
            font-size: 2.2rem;
            margin-bottom: 40px;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 4px;
            background: linear-gradient(to right, transparent, var(--accent-color), transparent);
            border-radius: 2px;
        }

        .circles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .period-circle {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 35px 25px;
            text-align: center;
            box-shadow: var(--shadow-light);
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .period-circle:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-medium);
            border-color: var(--accent-color);
        }

        .period-circle:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }

        .period-number {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            font-weight: bold;
            color: white;
            margin: 0 auto 20px;
            box-shadow: 0 5px 15px rgba(26, 95, 122, 0.3);
        }

        .period-circle:nth-child(2) .period-number {
            background: linear-gradient(135deg, #ff9e00, #ff9100);
        }

        .period-circle:nth-child(3) .period-number {
            background: linear-gradient(135deg, var(--success-color), #38b000);
        }

        .period-circle:nth-child(4) .period-number {
            background: linear-gradient(135deg, #e63946, #d00000);
        }

        .period-title {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .period-desc {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .period-meta {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: var(--secondary-color);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .period-meta i {
            font-size: 1.1rem;
        }

        /* شريط التعليمات */
        .instructions-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            margin: 40px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 20px;
            color: white;
        }

        .instructions-icon {
            font-size: 2rem;
            color: var(--accent-color);
        }

        .instructions-text {
            flex: 1;
            line-height: 1.6;
        }

        /* قسم الاختبار */
        .exam-section {
            display: none;
        }

        .exam-section.active {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .exam-header {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .exam-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .timer-box {
            background: linear-gradient(135deg, var(--danger-color), #d00000);
            color: white;
            padding: 12px 25px;
            border-radius: var(--border-radius-sm);
            font-size: 1.3rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(230, 57, 70, 0.3);
            min-width: 180px;
        }

        .timer {
            font-family: 'Courier New', monospace;
            font-size: 1.4rem;
            letter-spacing: 2px;
        }

        .question-counter {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 10px 20px;
            border-radius: var(--border-radius-sm);
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* شريط التقدم */
        .progress-container {
            background: var(--card-bg);
            border-radius: var(--border-radius-sm);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-light);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .progress-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            width: 5%;
            transition: width 0.5s ease;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* الأسئلة */
        .questions-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            min-height: 400px;
        }

        .question {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .question.active {
            display: block;
        }

        .question-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .question-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .question-text {
            flex: 1;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--dark-color);
            line-height: 1.6;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        .answer {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius-sm);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .answer:hover {
            transform: translateX(-5px);
            border-color: var(--secondary-color);
            box-shadow: var(--shadow-light);
        }

        .answer.selected {
            background: linear-gradient(135deg, rgba(42, 157, 143, 0.1), rgba(26, 95, 122, 0.1));
            border-color: var(--secondary-color);
            transform: translateX(-5px);
        }

        .answer-letter {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .answer-text {
            flex: 1;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        /* أزرار التنقل */
        .navigation-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding: 25px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
        }

        .nav-btn {
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 150px;
            justify-content: center;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow-light);
        }

        .prev-btn {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }

        .next-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .finish-btn {
            background: linear-gradient(135deg, var(--danger-color), #d00000);
            color: white;
        }

        .back-btn {
            background: linear-gradient(135deg, #ff9e00, #ff9100);
            color: white;
        }

        /* صفحة النتائج */
        .results-section {
            display: none;
            animation: slideUp 0.5s ease;
        }

        .results-section.active {
            display: block;
        }

        .results-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 40px;
            margin: 30px 0;
            box-shadow: var(--shadow-medium);
            text-align: center;
        }

        .results-header {
            margin-bottom: 40px;
        }

        .results-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .results-subtitle {
            color: #666;
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .score-display {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 40px;
            border-radius: var(--border-radius);
            margin: 40px auto;
            max-width: 500px;
            box-shadow: var(--shadow-light);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .score-label {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .score-percentage {
            font-size: 2rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.2);
            display: inline-block;
            padding: 10px 30px;
            border-radius: var(--border-radius-lg);
        }

        .results-details {
            margin: 40px 0;
            text-align: right;
        }

        .result-item {
            background: white;
            border-radius: var(--border-radius-sm);
            padding: 20px;
            margin-bottom: 15px;
            border-right: 5px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .result-item:hover {
            transform: translateX(-5px);
            box-shadow: var(--shadow-light);
        }

        .result-item.correct {
            border-right-color: var(--success-color);
            background: rgba(87, 204, 153, 0.1);
        }

        .result-item.incorrect {
            border-right-color: var(--danger-color);
            background: rgba(230, 57, 70, 0.1);
        }

        .result-question {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .result-answer {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
            padding: 8px 12px;
            border-radius: var(--border-radius-sm);
        }

        .user-answer {
            background: rgba(230, 57, 70, 0.1);
            border: 1px solid var(--danger-color);
        }

        .correct-answer {
            background: rgba(87, 204, 153, 0.1);
            border: 1px solid var(--success-color);
        }

        .result-label {
            font-weight: 600;
            min-width: 100px;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 18px 40px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 200px;
            justify-content: center;
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .restart-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .home-btn {
            background: linear-gradient(135deg, #ff9e00, #ff9100);
            color: white;
        }

        /* الفوتر */
        .main-footer {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            color: white;
            padding: 40px 0 20px;
            margin-top: 60px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-text {
            line-height: 1.8;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .copyright {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* تصميم متجاوب */
        @media (max-width: 992px) {
            .circles-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .exam-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .timer-container {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .site-title {
                font-size: 2.2rem;
            }
            
            .site-subtitle {
                font-size: 1.1rem;
            }
            
            .circles-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .navigation-panel {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
            
            .score-value {
                font-size: 3rem;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                padding: 20px 15px;
            }
            
            .site-title {
                font-size: 1.8rem;
            }
            
            .exam-title {
                font-size: 1.5rem;
            }
            
            .timer-box {
                min-width: 140px;
                padding: 10px 15px;
                font-size: 1.1rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .answer {
                padding: 15px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- خلفية ديناميكية -->
    <div class="dynamic-bg">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>

    <div class="container">
        <!-- الواجهة الرئيسية -->
        <header class="main-header">
            <div class="header-content">
                <div class="site-logo">
                    <div class="logo-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div>
                        <h1 class="site-title">نظام الامتحانات الدائري</h1>
                        <p class="site-subtitle">اختبارات تفاعلية في تاريخ الأردن عبر العصور</p>
                    </div>
                </div>
                
                <div class="student-card">
                    <div class="student-info">
                        <div class="student-name">
                            <i class="fas fa-user-graduate"></i>
                            عبدالرحمن أحمد المعايطه
                        </div>
                        <div class="student-role">
                            <span class="role-highlight">إعداد الطالب:</span> بناءً على ملخص الأستاذ أحمد أبو الصادق والأستاذ خالد الشمالية
                        </div>
                        <div class="student-role">
                            <i class="fas fa-quote-right" style="color: var(--secondary-color);"></i>
                            "التاريخ يُعِدّ الأجيال للغد، والاختبار يُعِدّ الطلاب للنجاح"
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- شريط التعليمات -->
        <div class="instructions-bar">
            <i class="fas fa-info-circle instructions-icon"></i>
            <div class="instructions-text">
                اختر إحدى الفترات التاريخية الأربعة لبدء الاختبار. كل اختبار يحتوي على 20 سؤالاً، ولديك 20 دقيقة للإجابة. 
                يمكنك التنقل بين الأسئلة وتغيير إجاباتك قبل إنهاء الاختبار.
            </div>
        </div>

        <!-- الدوائر الأربعة -->
        <section class="circles-section">
            <h2 class="section-title">اختر فترة تاريخية</h2>
            
            <div class="circles-grid" id="main-circles">
                <!-- الدائرة 1 -->
                <div class="period-circle" data-circle="1">
                    <div class="period-number">١</div>
                    <h3 class="period-title">العصور القديمة</h3>
                    <p class="period-desc">
                        اختبار شامل يغطي الفترة من ما قبل الميلاد حتى نهاية العصر الروماني
                    </p>
                    <div class="period-meta">
                        <i class="fas fa-hourglass-start"></i>
                        <span>ما قبل الميلاد - العصر الروماني</span>
                    </div>
                </div>

                <!-- الدائرة 2 -->
                <div class="period-circle" data-circle="2">
                    <div class="period-number">٢</div>
                    <h3 class="period-title">العصور الإسلامية</h3>
                    <p class="period-desc">
                        اختبار يغطي الفترة الإسلامية من صلح الحديبية حتى نهاية عصر المماليك
                    </p>
                    <div class="period-meta">
                        <i class="fas fa-mosque"></i>
                        <span>صلح الحديبية - المماليك</span>
                    </div>
                </div>

                <!-- الدائرة 3 -->
                <div class="period-circle" data-circle="3">
                    <div class="period-number">٣</div>
                    <h3 class="period-title">العصر العثماني</h3>
                    <p class="period-desc">
                        اختبار يغطي الفترة العثمانية من معركة مرج دابق حتى الحرب العالمية الأولى
                    </p>
                    <div class="period-meta">
                        <i class="fas fa-landmark"></i>
                        <span>مرج دابق - الحرب العالمية الأولى</span>
                    </div>
                </div>

                <!-- الدائرة 4 -->
                <div class="period-circle" data-circle="4">
                    <div class="period-number">٤</div>
                    <h3 class="period-title">الثورة العربية والعهد الحديث</h3>
                    <p class="period-desc">
                        اختبار يغطي الثورة العربية الكبرى وتأسيس الدولة الأردنية الحديثة
                    </p>
                    <div class="period-meta">
                        <i class="fas fa-flag"></i>
                        <span>الثورة العربية - العهد الحديث</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم الاختبار -->
        <section class="exam-section" id="exam-section">
            <div class="exam-header">
                <h2 class="exam-title" id="exam-title">
                    <i class="fas fa-book-open"></i>
                    <span id="current-exam-title"></span>
                </h2>
                
                <div class="timer-container">
                    <div class="timer-box">
                        <i class="fas fa-clock"></i>
                        <span class="timer" id="timer">20:00</span>
                    </div>
                    <div class="question-counter" id="question-counter">السؤال 1 من 20</div>
                </div>
            </div>

            <!-- شريط التقدم -->
            <div class="progress-container">
                <div class="progress-header">
                    <span>تقدم الاختبار</span>
                    <span id="progress-percentage">5%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <!-- الأسئلة -->
            <div class="questions-container" id="questions-container">
                <!-- سيتم ملء الأسئلة هنا -->
            </div>

            <!-- أزرار التنقل -->
            <div class="navigation-panel">
                <button class="nav-btn prev-btn" id="prev-btn">
                    <i class="fas fa-arrow-right"></i>
                    السابق
                </button>
                
                <div>
                    <button class="nav-btn back-btn" id="back-to-main-btn">
                        <i class="fas fa-home"></i>
                        العودة
                    </button>
                    <button class="nav-btn finish-btn" id="finish-btn" style="display: none;">
                        <i class="fas fa-flag-checkered"></i>
                        إنهاء الاختبار
                    </button>
                </div>
                
                <button class="nav-btn next-btn" id="next-btn">
                    التالي
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
        </section>

        <!-- صفحة النتائج -->
        <section class="results-section" id="results-section">
            <div class="results-card">
                <div class="results-header">
                    <h2 class="results-title">نتائج الاختبار</h2>
                    <p class="results-subtitle" id="results-subtitle"></p>
                </div>

                <div class="score-display">
                    <div class="score-value" id="final-score">0/20</div>
                    <div class="score-label" id="score-text">نتيجتك</div>
                    <div class="score-percentage" id="score-percentage">0%</div>
                </div>

                <div class="results-details" id="results-details">
                    <!-- سيتم ملء النتائج هنا -->
                </div>

                <div class="action-buttons">
                    <button class="action-btn restart-btn" id="restart-btn">
                        <i class="fas fa-redo"></i>
                        اختبار جديد
                    </button>
                    <button class="action-btn home-btn" id="home-btn">
                        <i class="fas fa-home"></i>
                        العودة للرئيسية
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- الفوتر -->
    <footer class="main-footer">
        <div class="footer-content">
            <p class="footer-text">
                نظام الامتحانات الدائري - تواريخ الأردن<br>
                إعداد الطالب: عبدالرحمن أحمد المعايطه بناءً على ملف "ملخص تواريخ الفصل الأول كامل"
            </p>
            <p class="footer-text">
                <i class="fas fa-chalkboard-teacher"></i> حسب ملخص الأستاذ أحمد أبو الصادق والأستاذ خالد الشمالية
            </p>
            <div class="copyright">
                جميع الحقوق محفوظة &copy; نظام الامتحانات الدائري 2024
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // البيانات الأساسية
            const examData = {
                1: {
                    title: "اختبار العصور القديمة",
                    subtitle: "ما قبل الميلاد حتى العصر الروماني",
                    questions: []
                },
                2: {
                    title: "اختبار العصور الإسلامية",
                    subtitle: "من صلح الحديبية إلى المماليك",
                    questions: []
                },
                3: {
                    title: "اختبار العصر العثماني",
                    subtitle: "معركة مرج دابق حتى الحرب العالمية الأولى",
                    questions: []
                },
                4: {
                    title: "اختبار الثورة العربية والعهد الحديث",
                    subtitle: "الثورة العربية الكبرى وما بعدها",
                    questions: []
                }
            };
            
            // الأسئلة (نفسها كما في الكود السابق)
            const allQuestions = {
                1: [
                    {question: "في أي عام اخترعت الكتابة حسب الملخص؟", answers: ["حوالي 3500 قبل الميلاد", "حوالي 3000 قبل الميلاد", "حوالي 2000 قبل الميلاد", "حوالي 4500 قبل الميلاد"], correct: 0},
                    {question: "متى اكتشف الرحالة السويسري بيركهاوت البتراء؟", answers: ["عام 1800", "عام 1812", "عام 1825", "عام 1798"], correct: 1},
                    {question: "متى أدرجت البتراء على لائحة التراث العالمي؟", answers: ["عام 1975", "عام 1995", "عام 1985", "عام 2000"], correct: 2},
                    {question: "متى احتل الإمبراطور الروماني تراجان البتراء؟", answers: ["عام 106 ميلادي", "عام 64 ميلادي", "عام 332 ميلادي", "عام 395 ميلادي"], correct: 0},
                    {question: "متى دخلت المملكة العمونيه تحت السيطرة الفارسية؟", answers: ["عام 539 قبل الميلاد", "عام 332 قبل الميلاد", "عام 64 ميلادي", "عام 106 ميلادي"], correct: 0},
                    {question: "متى سقطت الدولة البابلية (الكندانية) على يد الفرس؟", answers: ["عام 539 قبل الميلاد", "عام 332 قبل الميلاد", "عام 64 ميلادي", "عام 106 ميلادي"], correct: 0},
                    {question: "متى صارت المملكة العمونيه تابعاً للأشوريين؟", answers: ["عام 582 ق.م", "عام 539 ق.م", "عام 106 ق.م", "القرن 6 قبل الميلاد"], correct: 0},
                    {question: "متى أدرجت أم الرصاص على لائحة التراث العالمي؟", answers: ["عام 2004", "عام 2015", "عام 1985", "عام 2007"], correct: 0},
                    {question: "متى أدرج موقع المغطس على لائحة التراث العالمي؟", answers: ["عام 2004", "عام 2015", "عام 1985", "عام 2007"], correct: 1},
                    {question: "متى اختيرت البتراء كواحدة من عجائب الدنيا السبع الجديدة؟", answers: ["عام 2000", "عام 2007", "عام 2012", "عام 2015"], correct: 1},
                    {question: "متى أدرجت مدينة أم الجمال على لائحة التراث العالمي؟", answers: ["عام 2024", "عام 2015", "عام 2007", "عام 2012"], correct: 0},
                    {question: "متى اكتشف نفق اليرموك في شمال الأردن؟", answers: ["عام 2000", "عام 2007", "عام 2012", "عام 2015"], correct: 2},
                    {question: "متى تأسست سلطة إقليم البتراء التنموي السياحي؟", answers: ["عام 2000", "عام 2007", "عام 2012", "عام 2009"], correct: 3},
                    {question: "متى سقطت الإمبراطورية الرومانية الغربية؟", answers: ["عام 395 ميلادي", "عام 476 ميلادي", "عام 332 ميلادي", "عام 64 ميلادي"], correct: 1},
                    {question: "أين توجد أقدم خريطة فسيفسائية أصلية للأراضي المقدسة؟", answers: ["كنيسة الروم الأرثوذكس في مادبا", "كنيسة المغطس", "كنيسة أم الرصاص", "كنيسة البتراء"], correct: 0},
                    {question: "متى بدأت الحضارة الرومانية في الأردن؟", answers: ["عام 64 ق.م", "عام 106 ق.م", "عام 332 ميلادي", "عام 395 ميلادي"], correct: 0},
                    {question: "متى بدأت الحقبة البيزنطية في الأردن؟", answers: ["عام 64 ق.م", "عام 332 ميلادي", "عام 395 ميلادي", "عام 476 ميلادي"], correct: 2},
                    {question: "متى احتل القائد الروماني بومبي بلاد الشام؟", answers: ["عام 64 قبل الميلاد", "عام 64 ميلادي", "عام 106 ميلادي", "عام 332 ميلادي"], correct: 0},
                    {question: "متى بقيت دولة الأنباط مستقلة حتى احتلال الرومان؟", answers: ["عام 64 ق.م", "عام 106 ميلادي", "عام 209 ميلادي", "عام 332 ميلادي"], correct: 1},
                    {question: "متى حل البابيون محل الأشوريون؟", answers: ["في النصف الثاني القرن السابع قبل الميلاد", "في النصف الثاني من القرن السادس ق.م", "القرن 4 قبل الميلاد", "القرن 2 قبل الميلاد"], correct: 1}
                ],
                2: [
                    {question: "في أي عام حدثت معركة مؤتة؟", answers: ["السنة الخامسة للهجرة", "السنة السابعة للهجرة", "السنة الثامنة للهجرة", "السنة التاسعة للهجرة"], correct: 2},
                    {question: "متى حدثت معركة اليرموك؟", answers: ["عام 12 هـ", "عام 15 هـ", "عام 18 هـ", "عام 20 هـ"], correct: 1},
                    {question: "متى شيد الأيوبيون قلعة عجلون؟", answers: ["عام 1150 ميلادي", "عام 1184 ميلادي", "عام 1200 ميلادي", "عام 1220 ميلادي"], correct: 1},
                    {question: "متى حدثت معركة عين جالوت؟", answers: ["عام 1260 ميلادي", "عام 1250 ميلادي", "عام 1270 ميلادي", "عام 1240 ميلادي"], correct: 0},
                    {question: "متى حدثت معركة حطين؟", answers: ["عام 1187 ميلادي", "عام 1184 ميلادي", "عام 1192 ميلادي", "عام 1200 ميلادي"], correct: 0},
                    {question: "متى احتل الأفرنج القدس؟", answers: ["عام 1099 ميلادي", "عام 1187 ميلادي", "عام 1192 ميلادي", "عام 1200 ميلادي"], correct: 0},
                    {question: "متى حدثت معركة الزاب؟", answers: ["عام 750 ميلادي", "عام 751 ميلادي", "عام 752 ميلادي", "عام 753 ميلادي"], correct: 0},
                    {question: "متى دمر المغول بغداد؟", answers: ["عام 1250 ميلادي", "عام 1258 ميلادي", "عام 1260 ميلادي", "عام 1270 ميلادي"], correct: 1},
                    {question: "متى أرسل الرسول أول سرية خارج الجزيرة العربية إلى منطقة حسمي؟", answers: ["السنة السادسة للهجرة", "السنة السابعة للهجرة", "السنة الثامنة للهجرة", "السنة التاسعة للهجرة"], correct: 0},
                    {question: "متى أرسل أبو بكر الصديق جيشًا بقيادة أسامة بن زيد إلى الأردن؟", answers: ["عام 11 هـ", "عام 12 هـ", "عام 13 هـ", "عام 14 هـ"], correct: 0},
                    {question: "متى قسمت بلاد الشام إلى أربع أجناد في عهد عمر بن الخطاب؟", answers: ["عام 15 هـ", "عام 18 هـ", "عام 20 هـ", "عام 22 هـ"], correct: 1},
                    {question: "متى تأسست جامعة اليرموك؟", answers: ["عام 1976", "عام 1980", "عام 1985", "عام 1990"], correct: 0},
                    {question: "متى تأسست جامعة مؤتة؟", answers: ["عام 1981", "عام 1985", "عام 1990", "عام 1995"], correct: 0},
                    {question: "متى أدرج قصير عمرة على لائحة التراث العالمي؟", answers: ["عام 1985", "عام 1995", "عام 2005", "عام 2015"], correct: 0},
                    {question: "متى اكتشف آثار مدينة العقبة الإسلامية؟", answers: ["عام 1990", "عام 1995", "عام 1985", "عام 1989"], correct: 3},
                    {question: "متى حدثت ثورة سعيد بن خالد الأموي؟", answers: ["عام 750 ميلادي", "عام 813 ميلادي", "عام 752 ميلادي", "عام 753 ميلادي"], correct: 1},
                    {question: "متى استمرت الدولة الأيوبية؟", answers: ["1174-1250", "1187-1250", "1193-1250", "1200-1250"], correct: 0},
                    {question: "متى هاجم المغول أرض دمشق؟", answers: ["عام 1250 ميلادي", "عام 1258 ميلادي", "عام 1260 ميلادي", "عام 1270 ميلادي"], correct: 2},
                    {question: "متى حدثت معركة طبقة فحل؟", answers: ["عام 13 هـ", "عام 15 هـ", "عام 18 هـ", "عام 20 هـ"], correct: 0},
                    {question: "متى حدثت معركة أجنادين؟", answers: ["عام 13 هـ", "عام 15 هـ", "عام 18 هـ", "عام 20 هـ"], correct: 0}
                ],
                3: [
                    {question: "متى حدثت معركة مرج دابق؟", answers: ["عام 1516 ميلادي", "عام 1520 ميلادي", "عام 1500 ميلادي", "عام 1490 ميلادي"], correct: 0},
                    {question: "متى اندلعت الحرب العالمية الأولى؟", answers: ["عام 1912 ميلادي", "عام 1915 ميلادي", "عام 1914 ميلادي", "عام 1916 ميلادي"], correct: 2},
                    {question: "متى حدث تمرد بني حميدة؟", answers: ["عام 1875 ميلادي", "عام 1889 ميلادي", "عام 1900 ميلادي", "عام 1895 ميلادي"], correct: 1},
                    {question: "متى بدأ العمل بخط الحديد الحجازي؟", answers: ["عام 1895 ميلادي", "عام 1905 ميلادي", "عام 1900 ميلادي", "عام 1910 ميلادي"], correct: 2},
                    {question: "متى حدث تمرد الكرك (الهيئة)؟", answers: ["عام 1900 ميلادي", "عام 1905 ميلادي", "عام 1910 ميلادي", "عام 1915 ميلادي"], correct: 2},
                    {question: "متى حدث تمرد الشويك؟", answers: ["عام 1900 ميلادي", "عام 1905 ميلادي", "عام 1910 ميلادي", "عام 1915 ميلادي"], correct: 1},
                    {question: "متى حدث التمرد على حكم إبراهيم باشا في البلقاء والكرك؟", answers: ["عام 1831 ميلادي", "عام 1834 ميلادي", "عام 1839 ميلادي", "عام 1840 ميلادي"], correct: 1},
                    {question: "متى حدث التمرد على حكم إبراهيم باشا في عجلون؟", answers: ["عام 1831 ميلادي", "عام 1834 ميلادي", "عام 1839 ميلادي", "عام 1840 ميلادي"], correct: 2},
                    {question: "متى تشكل قضاء معان الذي تحول إلى لواء الكرك؟", answers: ["عام 1889 ميلادي", "عام 1894 ميلادي", "عام 1900 ميلادي", "عام 1905 ميلادي"], correct: 1},
                    {question: "متى صدر قانون الولايات العثماني؟", answers: ["عام 1864 ميلادي", "عام 1876 ميلادي", "عام 1889 ميلادي", "عام 1900 ميلادي"], correct: 0},
                    {question: "متى انتهى العمل من خط الحديد الحجازي؟", answers: ["عام 1908 ميلادي", "عام 1910 ميلادي", "عام 1912 ميلادي", "عام 1914 ميلادي"], correct: 0},
                    {question: "متى استولى حزب الاتحاد والترقي على الحكم في الدولة العثمانية؟", answers: ["عام 1908 ميلادي", "عام 1910 ميلادي", "عام 1912 ميلادي", "عام 1914 ميلادي"], correct: 0},
                    {question: "متى عين الشريف حسين أميراً على مكة؟", answers: ["عام 1908 ميلادي", "عام 1910 ميلادي", "عام 1912 ميلادي", "عام 1914 ميلادي"], correct: 0},
                    {question: "متى ولد الشريف حسين؟", answers: ["عام 1853 ميلادي", "عام 1856 ميلادي", "عام 1859 ميلادي", "عام 1862 ميلادي"], correct: 0},
                    {question: "متى توفي الشريف حسين؟", answers: ["عام 1925 ميلادي", "عام 1931 ميلادي", "عام 1935 ميلادي", "عام 1940 ميلادي"], correct: 1},
                    {question: "متى نفي الشريف حسين بن علي إلى إسطنبول؟", answers: ["عام 1893 ميلادي", "عام 1895 ميلادي", "عام 1898 ميلادي", "عام 1900 ميلادي"], correct: 0},
                    {question: "متى تمت مشاورات بين الأمير عبدالله ومعتمد بريطانيا في مصر؟", answers: ["عام 1914 ميلادي", "عام 1915 ميلادي", "عام 1916 ميلادي", "عام 1917 ميلادي"], correct: 0},
                    {question: "متى تأسست الجمعية العربية الفتاة؟", answers: ["عام 1911 ميلادي", "عام 1912 ميلادي", "عام 1913 ميلادي", "عام 1914 ميلادي"], correct: 0},
                    {question: "متى أعدم جمال باشا السفاح عدداً من رجالات العرب في دمشق؟", answers: ["عام 1915 ميلادي", "عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي"], correct: 1},
                    {question: "متى كان الحكم المصري لبلاد الشام؟", answers: ["1831-1840", "1835-1845", "1820-1830", "1840-1850"], correct: 0}
                ],
                4: [
                    {question: "متى بدأت الثورة العربية الكبرى؟", answers: ["عام 1915 ميلادي", "عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي"], correct: 1},
                    {question: "متى وصلت قوات الثورة العربية الكبرى إلى العقبة؟", answers: ["عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي", "عام 1919 ميلادي"], correct: 1},
                    {question: "متى ولد الملك عبدالله بن الحسين الأول؟", answers: ["عام 1880 ميلادي", "عام 1882 ميلادي", "عام 1884 ميلادي", "عام 1878 ميلادي"], correct: 1},
                    {question: "متى عقد المؤتمر العربي الأول في باريس؟", answers: ["عام 1913 ميلادي", "عام 1911 ميلادي", "عام 1915 ميلادي", "عام 1909 ميلادي"], correct: 0},
                    {question: "متى دخلت فصائل من قوات الثورة العربية الكبرى إلى دمشق؟", answers: ["عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي", "عام 1919 ميلادي"], correct: 2},
                    {question: "متى حدثت معارك معان؟", answers: ["عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي", "عام 1919 ميلادي"], correct: 2},
                    {question: "متى ولد الملك علي بن الحسين؟", answers: ["عام 1879 ميلادي", "عام 1880 ميلادي", "عام 1881 ميلادي", "عام 1882 ميلادي"], correct: 2},
                    {question: "متى ولد الملك فيصل بن الحسين؟", answers: ["عام 1881 ميلادي", "عام 1882 ميلادي", "عام 1883 ميلادي", "عام 1884 ميلادي"], correct: 2},
                    {question: "متى ولد الأمير زيد بن الحسين؟", answers: ["عام 1896 ميلادي", "عام 1897 ميلادي", "عام 1898 ميلادي", "عام 1899 ميلادي"], correct: 2},
                    {question: "متى عقد مؤتمر سان ريمو؟", answers: ["عام 1919 ميلادي", "عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي"], correct: 1},
                    {question: "متى حدثت معركة ميسلون؟", answers: ["عام 1919 ميلادي", "عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي"], correct: 1},
                    {question: "متى عقد المؤتمر السوري العام في دمشق؟", answers: ["عام 1919 ميلادي", "عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي"], correct: 1},
                    {question: "متى حدثت معركة تل الثعالب؟", answers: ["عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي", "عام 1923 ميلادي"], correct: 0},
                    {question: "متى حدثت ثورة جبل حوران؟", answers: ["عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي", "عام 1923 ميلادي"], correct: 0},
                    {question: "متى عقد مؤتمر قم في محافظة إربد؟", answers: ["عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي", "عام 1923 ميلادي"], correct: 0},
                    {question: "متى عقد اجتماع أم قيس؟", answers: ["عام 1920 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي", "عام 1923 ميلادي"], correct: 0},
                    {question: "متى تم توقيع اتفاقية سايكس بيكو؟", answers: ["عام 1915 ميلادي", "عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي"], correct: 1},
                    {question: "متى صدر وعد بلفور؟", answers: ["عام 1916 ميلادي", "عام 1917 ميلادي", "عام 1918 ميلادي", "عام 1919 ميلادي"], correct: 1},
                    {question: "متى عقد المؤتمر الصهيوني الأول في بازل؟", answers: ["عام 1896 ميلادي", "عام 1897 ميلادي", "عام 1898 ميلادي", "عام 1899 ميلادي"], correct: 1},
                    {question: "متى بحث مجلس الحلفاء مستقبل البلاد العربية في مؤتمر الصلح؟", answers: ["عام 1919 ميلادي", "عام 1923 ميلادي", "عام 1921 ميلادي", "عام 1922 ميلادي"], correct: 0}
                ]
            };
            
            // تعيين الأسئلة
            for (let i = 1; i <= 4; i++) {
                examData[i].questions = allQuestions[i];
            }
            
            // عناصر DOM
            const mainCircles = document.getElementById('main-circles');
            const examSection = document.getElementById('exam-section');
            const resultsSection = document.getElementById('results-section');
            const currentExamTitle = document.getElementById('current-exam-title');
            const resultsSubtitle = document.getElementById('results-subtitle');
            const timerElement = document.getElementById('timer');
            const questionCounter = document.getElementById('question-counter');
            const questionsContainer = document.getElementById('questions-container');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const finishBtn = document.getElementById('finish-btn');
            const backToMainBtn = document.getElementById('back-to-main-btn');
            const homeBtn = document.getElementById('home-btn');
            const restartBtn = document.getElementById('restart-btn');
            const progressFill = document.getElementById('progress-fill');
            const progressPercentage = document.getElementById('progress-percentage');
            const finalScore = document.getElementById('final-score');
            const scoreText = document.getElementById('score-text');
            const scorePercentage = document.getElementById('score-percentage');
            const resultsDetails = document.getElementById('results-details');
            
            // متغيرات الاختبار
            let currentExam = null;
            let currentQuestionIndex = 0;
            let userAnswers = [];
            let timerInterval = null;
            let timeLeft = 20 * 60;
            
            // تهيئة التطبيق
            initApp();
            
            function initApp() {
                // إضافة أحداث للنقر على الدوائر
                document.querySelectorAll('.period-circle').forEach(circle => {
                    circle.addEventListener('click', startExam);
                });
                
                // إضافة أحداث للأزرار
                prevBtn.addEventListener('click', showPreviousQuestion);
                nextBtn.addEventListener('click', showNextQuestion);
                finishBtn.addEventListener('click', finishExam);
                backToMainBtn.addEventListener('click', backToMain);
                homeBtn.addEventListener('click', backToMain);
                restartBtn.addEventListener('click', restartExam);
                
                // رسالة ترحيب
                setTimeout(() => {
                    alert("مرحباً بك في نظام الامتحانات الدائري لتواريخ الأردن!\n\nإعداد الطالب: عبدالرحمن أحمد المعايطه\n\nاختر إحدى الفترات التاريخية الأربعة للبدء بالاختبار.");
                }, 1000);
            }
            
            function startExam(event) {
                const circleNumber = parseInt(event.currentTarget.getAttribute('data-circle'));
                currentExam = circleNumber;
                
                // إخفاء الدوائر وإظهار قسم الاختبار
                mainCircles.style.display = 'none';
                examSection.classList.add('active');
                resultsSection.classList.remove('active');
                
                // تعيين عنوان الاختبار
                currentExamTitle.textContent = examData[currentExam].title;
                resultsSubtitle.textContent = examData[currentExam].title;
                
                // تهيئة إجابات المستخدم
                userAnswers = new Array(examData[currentExam].questions.length).fill(null);
                
                // إعادة تعيين مؤشر السؤال
                currentQuestionIndex = 0;
                
                // إنشاء الأسئلة في الواجهة
                createQuestions();
                
                // عرض السؤال الأول
                showQuestion(currentQuestionIndex);
                
                // بدء المؤقت
                startTimer();
                
                // تحديث أزرار التنقل
                updateNavigationButtons();
            }
            
            function createQuestions() {
                questionsContainer.innerHTML = '';
                const questions = examData[currentExam].questions;
                
                questions.forEach((question, index) => {
                    const questionElement = document.createElement('div');
                    questionElement.className = 'question';
                    questionElement.id = `question-${index}`;
                    
                    const questionHeader = document.createElement('div');
                    questionHeader.className = 'question-header';
                    
                    const questionNumber = document.createElement('div');
                    questionNumber.className = 'question-number';
                    questionNumber.textContent = index + 1;
                    
                    const questionText = document.createElement('div');
                    questionText.className = 'question-text';
                    questionText.textContent = question.question;
                    
                    questionHeader.appendChild(questionNumber);
                    questionHeader.appendChild(questionText);
                    
                    const answersContainer = document.createElement('div');
                    answersContainer.className = 'answers-grid';
                    
                    // إضافة الإجابات
                    question.answers.forEach((answer, answerIndex) => {
                        const answerElement = document.createElement('div');
                        answerElement.className = 'answer';
                        answerElement.dataset.index = answerIndex;
                        
                        const answerLetter = document.createElement('div');
                        answerLetter.className = 'answer-letter';
                        answerLetter.textContent = String.fromCharCode(1570 + answerIndex);
                        
                        const answerText = document.createElement('div');
                        answerText.className = 'answer-text';
                        answerText.textContent = answer;
                        
                        answerElement.appendChild(answerLetter);
                        answerElement.appendChild(answerText);
                        
                        // إضافة حدث النقر على الإجابة
                        answerElement.addEventListener('click', () => selectAnswer(index, answerIndex));
                        
                        answersContainer.appendChild(answerElement);
                    });
                    
                    questionElement.appendChild(questionHeader);
                    questionElement.appendChild(answersContainer);
                    
                    questionsContainer.appendChild(questionElement);
                });
            }
            
            function showQuestion(index) {
                // إخفاء جميع الأسئلة
                document.querySelectorAll('.question').forEach(q => {
                    q.classList.remove('active');
                });
                
                // إظهار السؤال الحالي
                document.getElementById(`question-${index}`).classList.add('active');
                
                // تحديث عداد الأسئلة
                questionCounter.textContent = `السؤال ${index + 1} من ${examData[currentExam].questions.length}`;
                
                // تحديث شريط التقدم
                const progress = ((index + 1) / examData[currentExam].questions.length) * 100;
                progressFill.style.width = `${progress}%`;
                progressPercentage.textContent = `${Math.round(progress)}%`;
                
                // تحديث أزرار التنقل
                updateNavigationButtons();
                
                // تلوين الإجابات المختارة مسبقًا
                if (userAnswers[index] !== null) {
                    const answers = document.querySelectorAll(`#question-${index} .answer`);
                    answers.forEach((answer, answerIndex) => {
                        answer.classList.remove('selected');
                        if (answerIndex === userAnswers[index]) {
                            answer.classList.add('selected');
                        }
                    });
                }
            }
            
            function selectAnswer(questionIndex, answerIndex) {
                // حفظ إجابة المستخدم
                userAnswers[questionIndex] = answerIndex;
                
                // تحديث عرض الإجابة المختارة
                const answers = document.querySelectorAll(`#question-${questionIndex} .answer`);
                answers.forEach((answer, idx) => {
                    answer.classList.remove('selected');
                    if (idx === answerIndex) {
                        answer.classList.add('selected');
                    }
                });
                
                // تحديث أزرار التنقل
                updateNavigationButtons();
            }
            
            function showPreviousQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    showQuestion(currentQuestionIndex);
                }
            }
            
            function showNextQuestion() {
                if (currentQuestionIndex < examData[currentExam].questions.length - 1) {
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex);
                }
            }
            
            function updateNavigationButtons() {
                // تحديث زر السابق
                prevBtn.disabled = currentQuestionIndex === 0;
                
                // تحديث زر التالي
                const isLastQuestion = currentQuestionIndex === examData[currentExam].questions.length - 1;
                nextBtn.disabled = isLastQuestion;
                
                // إظهار زر إنهاء الاختبار إذا كان السؤال الأخير
                finishBtn.style.display = isLastQuestion ? 'inline-flex' : 'none';
                
                // التحقق من إجابة السؤال الحالي
                const isCurrentAnswered = userAnswers[currentQuestionIndex] !== null;
                nextBtn.disabled = isLastQuestion ? true : !isCurrentAnswered;
                
                // إذا كان السؤال الأخير، التحقق من إجابته قبل تمكين زر الإنهاء
                if (isLastQuestion) {
                    finishBtn.disabled = !isCurrentAnswered;
                }
            }
            
            function startTimer() {
                timeLeft = 20 * 60;
                updateTimerDisplay();
                
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        finishExam();
                    }
                }, 1000);
            }
            
            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // تغيير اللون عندما يقل الوقت عن 5 دقائق
                if (timeLeft < 5 * 60) {
                    timerElement.style.color = '#ffd700';
                }
                
                // تحذير عند انتهاء الوقت
                if (timeLeft < 60) {
                    timerElement.style.color = '#ff4444';
                }
            }
            
            function finishExam() {
                // إيقاف المؤقت
                clearInterval(timerInterval);
                
                // إخفاء قسم الاختبار
                examSection.classList.remove('active');
                
                // إظهار قسم النتائج
                resultsSection.classList.add('active');
                
                // حساب النتيجة
                calculateResults();
            }
            
            function calculateResults() {
                const questions = examData[currentExam].questions;
                let correctCount = 0;
                
                // حساب عدد الإجابات الصحيحة
                userAnswers.forEach((answer, index) => {
                    if (answer === questions[index].correct) {
                        correctCount++;
                    }
                });
                
                // حساب النسبة المئوية
                const percentage = (correctCount / questions.length) * 100;
                
                // تحديث عرض النتيجة
                finalScore.textContent = `${correctCount}/${questions.length}`;
                scorePercentage.textContent = `${percentage.toFixed(1)}%`;
                
                // تحديث نص النتيجة
                let resultText = "";
                if (percentage >= 90) {
                    resultText = "ممتاز! أحسنت، مستوى رائع";
                } else if (percentage >= 80) {
                    resultText = "جيد جداً! أداء متميز";
                } else if (percentage >= 70) {
                    resultText = "جيد! يمكنك التحسين أكثر";
                } else if (percentage >= 60) {
                    resultText = "مقبول! تحتاج للمزيد من الدراسة";
                } else {
                    resultText = "ضعيف! راجع الدروس مرة أخرى";
                }
                
                scoreText.textContent = resultText;
                
                // عرض التفاصيل
                displayResultsDetails(correctCount, questions.length);
            }
            
            function displayResultsDetails(correctCount, totalQuestions) {
                resultsDetails.innerHTML = '';
                
                const questions = examData[currentExam].questions;
                
                questions.forEach((question, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = `result-item ${userAnswers[index] === question.correct ? 'correct' : 'incorrect'}`;
                    
                    const questionText = document.createElement('div');
                    questionText.className = 'result-question';
                    questionText.textContent = `${index + 1}. ${question.question}`;
                    
                    const userAnswerDiv = document.createElement('div');
                    userAnswerDiv.className = 'result-answer user-answer';
                    
                    const userLabel = document.createElement('span');
                    userLabel.className = 'result-label';
                    userLabel.textContent = 'إجابتك:';
                    
                    const userAnswerSpan = document.createElement('span');
                    if (userAnswers[index] !== null) {
                        userAnswerSpan.textContent = question.answers[userAnswers[index]];
                    } else {
                        userAnswerSpan.textContent = "لم تجب على هذا السؤال";
                    }
                    
                    userAnswerDiv.appendChild(userLabel);
                    userAnswerDiv.appendChild(userAnswerSpan);
                    
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'result-answer correct-answer';
                    
                    const correctLabel = document.createElement('span');
                    correctLabel.className = 'result-label';
                    correctLabel.textContent = 'الإجابة الصحيحة:';
                    
                    const correctAnswerSpan = document.createElement('span');
                    correctAnswerSpan.textContent = question.answers[question.correct];
                    
                    correctAnswerDiv.appendChild(correctLabel);
                    correctAnswerDiv.appendChild(correctAnswerSpan);
                    
                    resultItem.appendChild(questionText);
                    resultItem.appendChild(userAnswerDiv);
                    resultItem.appendChild(correctAnswerDiv);
                    
                    resultsDetails.appendChild(resultItem);
                });
            }
            
            function backToMain() {
                // إخفاء قسم النتائج وقسم الاختبار
                resultsSection.classList.remove('active');
                examSection.classList.remove('active');
                
                // إظهار الدوائر الرئيسية
                mainCircles.style.display = 'grid';
                
                // إيقاف المؤقت
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                
                // إعادة تعيين المتغيرات
                currentExam = null;
                currentQuestionIndex = 0;
                userAnswers = [];
            }
            
            function restartExam() {
                if (currentExam) {
                    startExam({ currentTarget: document.querySelector(`[data-circle="${currentExam}"]`) });
                }
            }
        });
    </script>
</body>
</html>
